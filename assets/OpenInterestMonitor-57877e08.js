import{r,j as e,R as p,A as y,o as v,D as k,T as u,a as w}from"./index-a99ea3d1.js";const O=()=>{const[s,b]=r.useState(null),[n,i]=r.useState(!0),[c,x]=r.useState(null),[o,j]=r.useState(null),d=async()=>{i(!0),x(null);try{b({openInterest:[{symbol:"BTCUSDT",totalOpenInterest:45230.5,avgOpenInterest:15076.8,totalValue:185e7,platforms:["Binance","Bybit","OKX"],change:{absoluteChange:1250.3,percentChange:8.5,valueChange:125e6,trend:"increasing"},alertLevel:{level:"medium",color:"yellow",icon:"📈"}},{symbol:"ETHUSDT",totalOpenInterest:892340.2,avgOpenInterest:297446.7,totalValue:95e7,platforms:["Binance","Bybit","OKX"],change:{absoluteChange:-12450.8,percentChange:-12.3,valueChange:-85e6,trend:"decreasing"},alertLevel:{level:"high",color:"orange",icon:"⚠️"}},{symbol:"SOLUSDT",totalOpenInterest:125680.4,avgOpenInterest:41893.5,totalValue:32e7,platforms:["Binance","Bybit"],change:{absoluteChange:2340.1,percentChange:2.1,valueChange:15e6,trend:"increasing"},alertLevel:{level:"normal",color:"green",icon:"✅"}},{symbol:"RNDRUSDT",totalOpenInterest:8450.7,avgOpenInterest:2816.9,totalValue:45e6,platforms:["Binance","Bybit"],change:{absoluteChange:890.2,percentChange:18.5,valueChange:85e5,trend:"increasing"},alertLevel:{level:"critical",color:"red",icon:"🚨"}}],alerts:[{type:"OI_MASSIVE_INCREASE",symbol:"RNDRUSDT",change:18.5,message:"Augmentation massive d'OI sur RNDRUSDT: +18.50% (signal haussier potentiel)",severity:"critical",trend:"bullish"},{type:"OI_MASSIVE_DECREASE",symbol:"ETHUSDT",change:-12.3,message:"Diminution importante d'OI sur ETHUSDT: -12.30% (déleverage en cours)",severity:"high",trend:"bearish"}],summary:{totalSymbols:4,criticalAlerts:1,highAlerts:1,totalOIValue:3165e6,avgOIChange:4.2}}),j(new Date)}catch(t){x("Erreur lors de la récupération des Open Interest"),console.error("Erreur OI:",t)}finally{i(!1)}};r.useEffect(()=>{d();const t=setInterval(d,3e5);return()=>clearInterval(t)},[]);const m=t=>t>=1e9?`$${(t/1e9).toFixed(2)}B`:t>=1e6?`$${(t/1e6).toFixed(1)}M`:t>=1e3?`$${(t/1e3).toFixed(1)}K`:`$${t.toFixed(2)}`,N=t=>{if(!t)return{text:"N/A",color:"text-gray-500"};const l=t.percentChange>=0?"+":"",a=t.percentChange>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return{text:`${l}${t.percentChange.toFixed(2)}%`,color:a,icon:t.percentChange>=0?e.jsx(u,{size:16}):e.jsx(w,{size:16})}},g=t=>{switch(t){case"critical":return"bg-red-100 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"high":return"bg-orange-100 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-800 dark:text-orange-200";case"medium":return"bg-yellow-100 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800 text-yellow-800 dark:text-yellow-200";default:return"bg-green-100 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200"}},f=t=>{switch(t){case"bullish":return"🐂";case"bearish":return"🐻";default:return"↔️"}};return n&&!s?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(p,{className:"h-5 w-5 animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Chargement des Open Interest..."})]})}):c?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:c})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"📊 Open Interest Monitor"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Surveillance des positions ouvertes sur les principales plateformes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:d,disabled:n,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors duration-200",children:e.jsx(p,{className:`h-4 w-4 ${n?"animate-spin":""}`})}),o&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Mis à jour: ",o.toLocaleTimeString("fr-FR")]})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Symboles"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.summary.totalSymbols})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valeur Totale OI"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m(s.summary.totalOIValue)})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alertes Critiques"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:s.summary.criticalAlerts})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Variation Moyenne"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["+",s.summary.avgOIChange.toFixed(2),"%"]})]})]})})]}),s&&s.openInterest.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"📈 Open Interest par Symbole"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Symbole"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"OI Total"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Valeur"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Variation 24h"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Plateformes"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Statut"})]})}),e.jsx("tbody",{children:s.openInterest.map((t,l)=>{const a=N(t.change);return e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.symbol})}),e.jsx("td",{className:"py-3 text-sm text-gray-600 dark:text-gray-400",children:t.totalOpenInterest.toLocaleString("fr-FR")}),e.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 dark:text-white",children:m(t.totalValue)}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:`flex items-center space-x-1 ${a.color}`,children:[a.icon,e.jsx("span",{className:"text-sm font-medium",children:a.text})]})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.platforms.map(h=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded",children:h},h))})}),e.jsx("td",{className:"py-3",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium border ${g(t.alertLevel.level)}`,children:[t.alertLevel.icon," ",t.alertLevel.level]})})]},t.symbol)})})]})})]}),s&&s.alerts.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"🚨 Alertes Open Interest"}),e.jsx("div",{className:"space-y-3",children:s.alerts.map((t,l)=>e.jsx("div",{className:`p-4 rounded-lg border ${g(t.severity)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg",children:f(t.trend)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.message}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm opacity-75",children:[e.jsxs("span",{children:["Symbole: ",t.symbol]}),e.jsxs("span",{children:["Variation: ",t.change.toFixed(2),"%"]}),e.jsxs("span",{children:["Tendance: ",t.trend]})]})]})]})},l))})]})]})};export{O as default};
