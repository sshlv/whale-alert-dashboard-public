import{r,j as e,R as y,A as p,m as l,d as b,T as v,a as k,F as w}from"./index-a99ea3d1.js";const R=()=>{const[t,u]=r.useState(null),[n,c]=r.useState(!0),[x,m]=r.useState(null),[o,j]=r.useState(null),N=new w,d=async()=>{c(!0),m(null);try{const s=await N.monitorFundingRates();u(s),j(new Date)}catch(s){m("Erreur lors de la récupération des funding rates"),console.error("Erreur funding rates:",s)}finally{c(!1)}};r.useEffect(()=>{d();const s=setInterval(d,6e4);return()=>clearInterval(s)},[]);const f=s=>{const a=s>=0?"+":"",i=s>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return e.jsxs("span",{className:i,children:[a,s.toFixed(4),"%"]})},g=s=>{switch(s){case"critical":return"bg-red-100 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"high":return"bg-orange-100 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800";case"medium":return"bg-yellow-100 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";default:return"bg-green-100 dark:bg-green-900/20 border-green-200 dark:border-green-800"}},h=s=>{switch(s){case"critical":return"🚨";case"high":return"⚠️";case"medium":return"⚡";default:return"✅"}};return n&&!t?e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Chargement des funding rates..."})]})}):x?e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 dark:text-red-400",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:x})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"📊 Funding Rates Monitor"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Surveillance des taux de financement des principales plateformes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:d,disabled:n,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors duration-200",children:e.jsx(y,{className:`h-4 w-4 ${n?"animate-spin":""}`})}),o&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Mis à jour: ",o.toLocaleTimeString("fr-FR")]})]})]}),t&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Symboles"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.summary.totalSymbols})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alertes Critiques"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:t.summary.criticalAlerts})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alertes Élevées"}),e.jsx("p",{className:"text-lg font-semibold text-orange-600",children:t.summary.highAlerts})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Funding Moyen"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.summary.avgFundingRate.toFixed(4),"%"]})]})]})})]}),t&&t.rates.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"📈 Funding Rates par Symbole"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Symbole"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Funding Rate"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Min/Max"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Plateformes"}),e.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Statut"})]})}),e.jsx("tbody",{children:t.rates.map((s,a)=>e.jsxs(l.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"py-3",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.symbol})}),e.jsx("td",{className:"py-3",children:f(s.avgFundingRate)}),e.jsxs("td",{className:"py-3 text-sm text-gray-600 dark:text-gray-400",children:[s.minFundingRate.toFixed(4),"% / ",s.maxFundingRate.toFixed(4),"%"]}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.platforms.map(i=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded",children:i},i))})}),e.jsx("td",{className:"py-3",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${g(s.alertLevel.level)}`,children:[h(s.alertLevel.level)," ",s.alertLevel.level]})})]},s.symbol))})]})})]}),t&&t.alerts.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"🚨 Alertes Funding Rates"}),e.jsx("div",{className:"space-y-3",children:t.alerts.map((s,a)=>e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:`p-4 rounded-lg border ${g(s.severity)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg",children:h(s.severity)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.message}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Symbole: ",s.symbol]}),e.jsxs("span",{children:["Rate: ",s.fundingRate.toFixed(4),"%"]}),e.jsxs("span",{children:["Plateformes: ",s.platforms.join(", ")]})]})]})]})},a))})]})]})};export{R as default};
